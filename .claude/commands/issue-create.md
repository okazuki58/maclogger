# Issue生成（/issue-create）

GitHub Issue を唯一の仕様ソース（Single Source of Truth）とした AI 駆動開発における Issue 生成コマンドです。

## 目的

雑な要件や思考メモをまとめた md ファイルを入力として、GitHub Issue としてレビュー可能な最小仕様を生成する。

## 引数

- `$ARGUMENTS`: Issue の元となる要件や仕様の説明（テキストで直接入力、または md ファイルを添付のどちらでも可能）

## 入力前提

- **以下のいずれかの方法で要件を提供すること**:
  - **方法1**: チャットで直接テキストを入力
  - **方法2**: md / テキストファイルを添付
- **提供された情報のみを情報源とすること**
- 入力がない場合は、ユーザーに対して「Issue 作成の元となる要件をテキストで入力するか、md ファイルを添付してください」と丁寧に促す

## 振る舞い

1. 入力内容を確認する（テキスト入力または添付ファイル）
2. 提供された情報を全文読む
3. 内容を整理し、Issue 用の構造に再構成する
4. **記載されていない仕様は推測しない**
5. 判断不能な点・未確定事項を特定する
6. **未確定事項がある場合は、ユーザーに質問して確認する**（AskUserQuestionツールを使用）
7. 質問への回答を反映し、Issue本文を完成させる
8. `gh issue create` コマンドで実際に Issue を作成する

## 出力構造（固定テンプレート）

以下の構造で Issue 本文を生成すること：

```markdown
## 背景・目的
{提供された情報から抽出した背景・目的。記載がなければ「未記載」と明示}

## 要件

### やること
- {提供された情報に明記されている要件を箇条書き}
- {記載されていない内容は含めない}

### やらないこと
- {明示的にスコープ外とされている項目}
- {記載がなければこのセクション自体を省略可}

## 完了条件（DoD: Definition of Done）
- [ ] {チェックリスト形式で具体的な完了条件}
- [ ] {テスト可能な条件であること}
- [ ] {提供された情報に記載されている内容のみ}

## 未確定事項・要確認事項
- {未確定事項がある場合は、Issue作成前にユーザーに質問して確認する}
- {質問への回答を反映した後、このセクションには「なし」と記載する}
- {質問しても不明な点が残る場合のみ、ここに明記する}
```

## Issue作成コマンド

生成した内容を一時ファイルに保存し、以下のコマンドで Issue を作成：

```bash
gh issue create --title "{生成したタイトル}" --body-file /tmp/issue_body.md
```

## 制約（重要）

- **コードを書かない**
- **技術選定・実装方針を書かない**
- **提供された情報に書かれていない内容は推測・補完しない（質問で確認する）**

## 使用例

```
# テキストで直接入力
/issue-create ユーザー認証機能を追加したい。ログイン画面とログアウト機能が必要。

# md ファイルを添付して実行
/issue-create
（ファイル添付した状態で実行）
```

## 前提条件

- GitHub CLI (`gh`) がインストールされ、認証済みであること
- 現在のディレクトリが Git リポジトリであること
- リポジトリに対して Issue 作成権限があること

## 最優先事項

- 仕様の正を GitHub に集約すること
- 非エンジニアでも仕様確認・レビューができること
- AI が仕様を推測・補完・改変しないこと
- **不明点は必ずユーザーに質問して確認すること**

## 次のステップ

Issue 作成後は `/issue-update {番号}` で検証を実行することを推奨します。
