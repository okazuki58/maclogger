# Issue実装（/issue-run）

GitHub Issue に記載された内容のみを忠実に実装するコマンドです。

## 目的

GitHub Issue に記載された内容のみを忠実に実装する。

## 引数

- `$ARGUMENTS`: 対象の GitHub Issue URL または番号
  - URL形式: `https://github.com/owner/repo/issues/123`
  - 番号のみ: `123`
  - **省略した場合**: AI がユーザーに対象 Issue URL を質問します

## 振る舞い

### Issue URL が指定されていない場合

1. 「どの Issue を実装しますか？Issue URL または番号を教えてください」とユーザーに質問

### Issue URL が指定されている場合

1. URL から Issue 番号を抽出する（URL形式の場合）
2. `gh issue view {番号} --json title,body,comments` で Issue の最新内容を取得
3. Issue 本文および確定コメントのみを前提として実装する（実装を始める前に必ずブランチを切ること）
4. 完了条件（DoD）を満たしているかを基準に進める
5. 実装後、Issue のどの記述に対応したかを明示する

### 実装中に不足・矛盾を発見した場合

- **実装を即座に停止する**
- 不足・矛盾の内容を明示する
- `/issue-update` での検証または Issue 本文の更新を促す

## 制約（重要）

- **Issue に書かれていない仕様は実装しない**
- **不足・矛盾があれば実装を止めて指摘する**
- **仕様改善提案を含めて実装しない**
- **「こうした方が良い」という判断をしない**
- **絶対にコミットしない（ブランチを切って実装のみ行う）**
- **絶対にマージしない**
- **実装完了後はユーザーの指示を待つ**

## 実装完了後の報告フォーマット

```markdown
## 実装完了報告

### 対応した Issue 項目
- [x] {DoD 項目1} → {実装したファイルパス・変更概要}
- [x] {DoD 項目2} → {実装したファイルパス・変更概要}
- [x] {要件N} → {対応内容の説明}

### 実装詳細
- 変更ファイル: {ファイルパスのリスト}
- 主な変更内容: {簡潔な説明}

### 未対応の項目（あれば）
- [ ] {項目} → {理由: Issue 記載不足のため未実装}

### 確認事項
- {実装後に人が確認すべき項目}
- {手動テストが必要な箇所}
```

## 使用例

```
# Issue URL を指定して実装
/issue-run https://github.com/owner/repo/issues/123

# Issue 番号のみでも可
/issue-run 123

# 省略（AI が質問する）
/issue-run
```

## 前提条件

- GitHub CLI (`gh`) がインストールされ、認証済みであること
- 現在のディレクトリが Git リポジトリであること
- リポジトリに対して Issue 閲覧権限があること
- `/issue-update` で検証済みであることを推奨

## 実装の原則

### Issue 記載内容が唯一の真実

- Issue 本文および確定済みコメントのみを実装根拠とする
- 記載されていない仕様は実装しない
- 「こうした方が良い」という判断はしない

### DoD（完了条件）を基準に進める

- Issue の「完了条件」セクションをチェックリストとして使用
- すべての DoD 項目を満たすことを目標とする
- DoD に記載されていない追加実装はしない

### 不足・矛盾は即座に報告

- 実装に必要な情報が不足している場合は、実装を停止して報告
- Issue 本文の修正または `/issue-update` での再検証を促す
- 推測で実装を進めない

## 成功条件

- Issue の DoD がすべて満たされている
- Issue 記載外の実装が含まれていない
- 実装内容と Issue 記述の対応関係が明確

## 次のステップ

実装完了後は、以下を実行してください：

1. 手動テストで動作確認
2. 必要に応じて `/pr` でプルリクエスト作成
3. Issue をクローズ（または DoD チェックボックスを更新）
